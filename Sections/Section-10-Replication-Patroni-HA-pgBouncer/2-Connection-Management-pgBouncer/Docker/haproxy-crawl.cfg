global
    daemon
    maxconn 1000

defaults
    mode tcp
    timeout connect 10s
    timeout client 30m
    timeout server 30m

frontend psql-master
    mode tcp
    bind *:6000
    default_backend psql-master-back

frontend psql-slaves
    mode tcp
    bind *:6010
    default_backend psql-slaves-back

backend psql-master-back
    mode tcp
    option tcp-check
    server master pgbouncer:6432 check port 6432 inter 2s rise 2 fall 2 maxconn 100

backend psql-slaves-back
    mode tcp
    server slave1 pgbouncer-slave:6432 check port 6432 inter 2s rise 2 fall 2 maxconn 100

listen stats
    bind *:6404
    mode http
    stats enable
    stats uri /
    stats refresh 5s
